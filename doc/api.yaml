openapi: 3.0.3
info:
  title: WASAtext API
  description: REST API specification for WASAtext messaging system.
  version: "3.0.1"

servers:
  - url: http://localhost:3000
    description: Test server running locally, for development purposes.

tags:
  - name: profile
    description: Operations related to user profile
  - name: conversations
    description: Conversation retrieval
  - name: messages
    description: Message operations
  - name: groups
    description: Group management

paths:

  /login:
    post:
      tags: [profile]
      summary: User login
      description: Logs in a user or creates it if it does not exist.
      operationId: doLogin
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        "200":
          description: Successful login
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
        "400":
          description: Invalid request body or missing username
        "500":
          description: Server error (e.g., error creating user or generating token)

  /me/username:
    patch:
      tags: [profile]
      summary: Change username
      description: Updates the username of the authenticated user.
      operationId: setMyUserName
      security: [{ bearerAuth: [] }]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UsernameUpdate'
      responses:
        "200":
          description: Username updated, returns new JWT token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
        "400":
          description: Invalid request body or username validation failed (must be 5-16 characters)
        "401":
          description: Unauthorized - invalid or missing token
        "500":
          description: Server error

  /me/photo:
    post:
      tags: [profile]
      summary: Update profile photo
      description: Uploads or replaces the user profile photo. Photo is resized to 200x200 px and converted to JPEG.
      operationId: setMyPhoto
      security: [{ bearerAuth: [] }]
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PhotoUpload'
      responses:
        "200":
          description: Photo updated successfully
        "400":
          description: Invalid request (missing username, invalid file format, or file processing error)
        "401":
          description: Unauthorized - invalid or missing token
        "500":
          description: Server error

  /conversations/{username}:
    get:
      tags: [conversations]
      summary: List conversations
      description: Retrieves all conversations of the authenticated user.
      operationId: getMyConversations
      security: [{ bearerAuth: [] }]
      parameters:
        - name: username
          in: path
          required: true
          schema:
            type: string
            minLength: 1
            maxLength: 64
            pattern: "^[a-zA-Z0-9_-]+$"
            example: "Karol"
      responses:
        "200":
          description: List of conversations
          content:
            application/json:
              schema:
                type: array
                minItems: 0
                maxItems: 1000
                items:
                  $ref: '#/components/schemas/ConversationSnippet'
        "401":
          description: Unauthorized - invalid or missing token
        "500":
          description: Server error

  /conversation/{conversationId}:
    post:
      tags: [conversations]
      summary: Get conversation
      description: Retrieves a single conversation with participants and message history.
      operationId: getConversation
      security: [{ bearerAuth: [] }]
      parameters:
        - name: conversationId
          in: path
          required: true
          schema:
            type: string
            minLength: 1
            maxLength: 64
            pattern: "^[a-zA-Z0-9_-]+$"
            example: "12345"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetConversationRequest'
      responses:
        "200":
          description: Conversation data with participants and messages
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConversationResponse'
        "400":
          description: Invalid conversation ID or request body
        "401":
          description: Unauthorized - invalid or missing token
        "403":
          description: Forbidden - user not in conversation
        "500":
          description: Server error

  /messages:
    post:
      tags: [messages]
      summary: Send message
      description: Sends a new message to either a group conversation or private conversation. If conversation doesn't exist between users and no conversationId is provided, creates a new private conversation. Optionally supports replying to existing messages.
      operationId: sendMessage
      security: [{ bearerAuth: [] }]
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - senderUsername
                - content
              properties:
                senderUsername:
                  type: string
                  description: Username of the sender
                  minLength: 1
                  maxLength: 64
                  pattern: "^[a-zA-Z0-9_-]+$"
                  example: "Karol"
                receiverUsername:
                  type: string
                  description: Username of the receiver (required for private conversations, optional for groups)
                  minLength: 1
                  maxLength: 64
                  pattern: "^[a-zA-Z0-9_-]+$"
                  example: "alice"
                conversationId:
                  type: string
                  description: Conversation ID (optional, used for group messages or existing conversations)
                  minLength: 1
                  maxLength: 64
                  pattern: "^[a-zA-Z0-9_-]+$"
                  example: "12345"
                content:
                  type: string
                  description: Message content
                  minLength: 1
                  maxLength: 500
                  example: "Hello, whats up?"
                replyingToId:
                  type: string
                  description: ID of the message being replied to (optional, for threading)
                  minLength: 1
                  maxLength: 64
                  pattern: "^[0-9]+$"
                  example: "98765"
                attachments:
                  type: array
                  items:
                    type: string
                    format: binary
                  description: Optional file attachments
      responses:
        "201":
          description: Message sent successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MessageResponse'
        "400":
          description: Invalid request (missing required fields or conversation not found)
        "401":
          description: Unauthorized - invalid or missing token
        "500":
          description: Server error

  /messages/{messageId}:
    delete:
      tags: [messages]
      summary: Delete message
      description: Deletes a message. Only the sender can delete their own message.
      operationId: deleteMessage
      security: [{ bearerAuth: [] }]
      parameters:
        - $ref: '#/components/parameters/MessageId'
      responses:
        "204":
          description: Message deleted successfully
        "401":
          description: Unauthorized - invalid token or not the message sender
        "404":
          description: Message not found
        "500":
          description: Server error

  /messages/{messageId}/status:
    patch:
      tags: [messages]
      summary: Update message status
      description: Updates the status of a message (e.g., from 'sent' to 'delivered' or 'received'). User must be a member of the conversation but not the sender of the message.
      operationId: updateMessageStatus
      security: [{ bearerAuth: [] }]
      parameters:
        - $ref: '#/components/parameters/MessageId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MessageStatusUpdate'
      responses:
        "204":
          description: Message status updated successfully
        "400":
          description: Invalid request body or invalid status value
        "401":
          description: Unauthorized - invalid or missing token
        "403":
          description: Forbidden - user not in conversation or is the message sender
        "404":
          description: Message not found
        "500":
          description: Server error

  /messages/{messageId}/forwards:
    post:
      tags: [messages]
      summary: Forward message
      description: Forwards an existing message to another conversation. User must be a member of the target conversation.
      operationId: forwardMessage
      security: [{ bearerAuth: [] }]
      parameters:
        - $ref: '#/components/parameters/MessageId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ForwardRequest'
      responses:
        "201":
          description: Message forwarded successfully
        "400":
          description: Invalid request body
        "401":
          description: Unauthorized - invalid or missing token
        "403":
          description: Forbidden - user not in target conversation
        "404":
          description: Original message not found
        "500":
          description: Server error



  /attachments/{messageId}:
    post:
      tags: [messages]
      summary: Get attachment from message
      description: Retrieves a specific attachment from a message.
      operationId: getAttachmentFromMessage
      security: [{ bearerAuth: [] }]
      parameters:
        - $ref: '#/components/parameters/MessageId'
      responses:
        "200":
          description: Attachment retrieved successfully
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
        "401":
          description: Unauthorized
        "404":
          description: Message or attachment not found
        "500":
          description: Server error

  /users:
    get:
      tags: [profile]
      summary: Search users
      description: Retrieves a list of all users in the system.
      operationId: searchUsers
      security: [{ bearerAuth: [] }]
      responses:
        "200":
          description: List of all users
          content:
            application/json:
              schema:
                type: array
                minItems: 0
                maxItems: 1000
                items:
                  type: object
                  description: User information
                  properties:
                    username:
                      type: string
                      minLength: 1
                      maxLength: 64
                      pattern: "^[a-zA-Z0-9_-]+$"
                      description: Username of the user
        "401":
          description: Unauthorized
        "500":
          description: Server error

  /users/{username}/photo:
    get:
      tags: [profile]
      summary: Get user profile photo
      description: Retrieves the profile photo of a specific user.
      operationId: getUserProfilePhoto
      security: [{ bearerAuth: [] }]
      parameters:
        - name: username
          in: path
          required: true
          schema:
            type: string
            minLength: 1
            maxLength: 64
            pattern: "^[a-zA-Z0-9_-]+$"
            example: "Karol"
      responses:
        "200":
          description: User profile photo retrieved successfully
          content:
            image/jpeg:
              schema:
                type: string
                format: binary
        "401":
          description: Unauthorized
        "404":
          description: User or photo not found
        "500":
          description: Server error

  /messages/{messageId}/reactions:
    post:
      tags: [messages]
      summary: Add reaction
      description: Adds an emoji reaction to a message. User must be in the conversation.
      operationId: commentMessage
      security: [{ bearerAuth: [] }]
      parameters:
        - $ref: '#/components/parameters/MessageId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Reaction'
      responses:
        "201":
          description: Reaction added successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MessageResponse'
        "400":
          description: Invalid request body
        "401":
          description: Unauthorized - invalid or missing token
        "403":
          description: Forbidden - user not in conversation
        "500":
          description: Server error

    delete:
      tags: [messages]
      summary: Remove reaction
      description: Removes a reaction from a message. User must be in the conversation.
      operationId: uncommentMessage
      security: [{ bearerAuth: [] }]
      parameters:
        - $ref: '#/components/parameters/MessageId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteReaction'
      responses:
        "204":
          description: Reaction removed successfully
        "400":
          description: Invalid request body
        "401":
          description: Unauthorized - invalid or missing token
        "403":
          description: Forbidden - user not in conversation
        "500":
          description: Server error

  /groups/{groupId}/members:
    post:
      tags: [groups]
      summary: Add group member
      description: Adds a user to a group. Only existing group members can add new members.
      operationId: addToGroup
      security: [{ bearerAuth: [] }]
      parameters:
        - $ref: '#/components/parameters/GroupId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddGroupMemberRequest'
      responses:
        "204":
          description: Member added successfully
        "400":
          description: Invalid request (group doesn't exist, user to add doesn't exist, or invalid group ID)
        "401":
          description: Unauthorized - invalid token or requesting user not in group
        "208":
          description: User already in group
        "500":
          description: Server error
        

  /groups/{groupId}/members/me:
    delete:
      tags: [groups]
      summary: Leave group
      description: Removes the authenticated user from the group.
      operationId: leaveGroup
      security: [{ bearerAuth: [] }]
      parameters:
        - $ref: '#/components/parameters/GroupId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LeaveGroupRequest'
      responses:
        "204":
          description: Successfully left group
        "400":
          description: Invalid request (group doesn't exist or invalid group ID)
        "401":
          description: Unauthorized - invalid or missing token
        "208":
          description: User not in group
        "500":
          description: Server error
          

  /groups/{groupId}/photo:
    get:
      tags: [groups]
      summary: Get group photo
      description: Retrieves the group photo.
      operationId: getGroupPhoto
      security: [{ bearerAuth: [] }]
      parameters:
        - $ref: '#/components/parameters/GroupId'
      responses:
        "200":
          description: Group photo retrieved successfully
          content:
            image/jpeg:
              schema:
                type: string
                format: binary
        "401":
          description: Unauthorized - invalid or missing token
        "404":
          description: Group or photo not found
        "500":
          description: Server error

  /groups:
    post:
      tags: [groups]
      summary: Create group
      description: Creates a new group and its conversation. The creator is automatically added as a member.
      operationId: createGroup
      security: [{ bearerAuth: [] }]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GroupCreate'
      responses:
        "201":
          description: Group created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupCreateResponse'
        "400":
          description: Invalid request body or missing group_name
        "401":
          description: Unauthorized - invalid or missing token
        "500":
          description: Server error

components:

  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  parameters:
    MessageId:
      name: messageId
      in: path
      required: true
      description: Unique message identifier
      schema:
        type: string
        minLength: 1
        maxLength: 64
        pattern: "^[a-zA-Z0-9_-]+$"

    ConversationId:
      name: conversationId
      in: path
      required: true
      description: Unique conversation identifier
      schema:
        type: string
        minLength: 1
        maxLength: 64
        pattern: "^[a-zA-Z0-9_-]+$"

    GroupId:
      name: groupId
      in: path
      required: true
      description: Unique group identifier
      schema:
        type: string
        minLength: 1
        maxLength: 64
        pattern: "^[a-zA-Z0-9_-]+$"

  schemas:

    LoginRequest:
      type: object
      description: Login request payload
      required: [username]
      properties:
        username:
          type: string
          description: User name
          minLength: 3
          maxLength: 16
          pattern: "^[a-zA-Z0-9_]+$"
          example: "Karol"

    LoginResponse:
      type: object
      description: Login response
      required: [token]
      properties:
        token:
          type: string
          description: JWT authentication token
          minLength: 10
          maxLength: 512
          pattern: "^[A-Za-z0-9._-]+$"
          example: "LOSOWEad7afwdbkafa7ZNAKIIIIII.absfisuefs.shfsef"

    UsernameUpdate:
      type: object
      description: Username update payload
      required: [username, new-username]
      properties:
        username:
          type: string
          description: Current username
          minLength: 3
          maxLength: 16
          pattern: "^[a-zA-Z0-9_]+$"
          example: "o1l1"
        new-username:
          type: string
          description: New username (must be 5-16 characters)
          minLength: 5
          maxLength: 16
          pattern: "^[a-zA-Z0-9_]+$"
          example: "Karol"

    Conversation:
      type: object
      description: Conversation data
      required: [id, participants, messages]
      properties:
        id:
          type: string
          description: Conversation ID
          minLength: 1
          maxLength: 64
          pattern: "^[a-zA-Z0-9_-]+$"
        participants:
          type: array
          description: Participants list
          minItems: 1
          maxItems: 100
          items:
            type: string
            minLength: 1
            maxLength: 64
            pattern: "^[a-zA-Z0-9_-]+$"
        messages:
          type: array
          description: Messages list
          minItems: 0
          maxItems: 10000
          items:
            $ref: '#/components/schemas/Message'

    ConversationSnippet:
      type: object
      description: A snippet of a conversation for list view
      required: [ConversationID, ConversationType]
      properties:
        ConversationID:
          type: integer
          description: Unique ID of the conversation
          example: 12345
        ConversationType:
          type: string
          description: Type of conversation (private or group)
          minLength: 1
          maxLength: 10
          pattern: "^(private|group)$"
          enum: [private, group]
          example: "private"
        GroupID:
          type: integer
          description: ID of the group (only for group conversations)
          example: 100
        GroupName:
          type: string
          description: Name of the group (only for group conversations)
          minLength: 1
          maxLength: 100
          pattern: "^.*$"
          example: "Project Team"
        OtherUsername:
          type: string
          description: Username of the other participant (only for private conversations)
          minLength: 1
          maxLength: 64
          pattern: "^[a-zA-Z0-9_-]+$"
          example: "Karol"
        LastMessage:
          type: string
          description: Content of the last message in the conversation
          minLength: 1
          maxLength: 500
          pattern: "^.*$"
          example: "Hello, whats up?"
        LastMessageTime:
          type: string
          format: date-time
          description: Timestamp of the last message
          example: "2026-01-01T21:37:00Z"
        LastMessageSender:
          type: string
          description: Username of the sender of the last message
          minLength: 1
          maxLength: 64
          pattern: "^[a-zA-Z0-9_-]+$"
          example: "alice"

    GetConversationRequest:
      type: object
      description: Request body for getting conversation details
      required: [username]
      properties:
        username:
          type: string
          description: Username for authorization
          minLength: 1
          maxLength: 64
          pattern: "^[a-zA-Z0-9_-]+$"
          example: "Karol"
        message_quantity:
          type: integer
          description: Number of messages to retrieve (default 50, max 100)
          minimum: 1
          maximum: 100
          default: 50
          example: 50

    ConversationResponse:
      type: object
      description: Full conversation data with participants and messages
      required: [conversation_id, participants, messages]
      properties:
        conversation_id:
          type: integer
          description: Unique ID of the conversation
          example: 12345
        is_group:
          type: boolean
          description: Whether the conversation is a group conversation
          example: false
        group_id:
          type: integer
          description: Group ID (only for group conversations)
          example: 100
        participants:
          type: array
          description: List of participant usernames
          minItems: 1
          maxItems: 100
          items:
            type: string
            minLength: 1
            maxLength: 64
            pattern: "^[a-zA-Z0-9_-]+$"
            example: "Karol"
        messages:
          type: array
          description: List of messages in the conversation
          minItems: 0
          maxItems: 10000
          items:
            $ref: '#/components/schemas/MessageInConversation'

    MessageInConversation:
      type: object
      description: Message within a conversation response
      required: [id, sender_username, content, timestamp]
      properties:
        id:
          type: integer
          format: int64
          description: Message ID
          example: 54321
        sender_username:
          type: string
          description: Username of the sender
          minLength: 1
          maxLength: 64
          pattern: "^[a-zA-Z0-9_-]+$"
          example: "Karol"
        content:
          type: string
          description: Message content
          minLength: 1
          maxLength: 500
          example: "Hello, whats up?"
        timestamp:
          type: string
          format: date-time
          description: Message timestamp
          example: "2026-01-01T21:37:00Z"
        has_attachment:
          type: boolean
          description: Whether the message has attachments
          example: false
        reactions:
          type: array
          description: List of reactions
          minItems: 0
          maxItems: 50
          items:
            type: string
            minLength: 1
            maxLength: 100
            description: Reaction string
            example: "Karol: (:"
        status:
          type: string
          description: Message status (sent, delivered, received, hidden)
          minLength: 4
          maxLength: 9
          pattern: "^(sent|delivered|received|hidden)$"
          example: "sent"
        replying_to_id:
          type: integer
          format: int64
          description: ID of the message being replied to (0 if not a reply)
          example: 0
        replying_to_sender:
          type: string
          description: Username of the sender of the message being replied to
          minLength: 1
          maxLength: 64
          pattern: "^[a-zA-Z0-9_-]+$"
          example: "alice"
        replying_to_content:
          type: string
          description: Content preview of the message being replied to
          minLength: 1
          maxLength: 500
          example: "Original message text"

    Message:
      type: object
      description: Message entity
      required: [id, senderId, conversationId, content, timestamp]
      properties:
        id:
          type: string
          description: Message ID
          minLength: 1
          maxLength: 64
          pattern: "^[a-zA-Z0-9_-]+$"
          example: "54321"
        senderId:
          type: string
          description: Sender identifier
          minLength: 1
          maxLength: 64
          pattern: "^[a-zA-Z0-9_-]+$"
          example: "Karol"
        conversationId:
          type: string
          description: Conversation ID
          minLength: 1
          maxLength: 64
          pattern: "^[a-zA-Z0-9_-]+$"
          example: "12345"
        content:
          type: string
          description: Message text
          minLength: 1
          maxLength: 500
          example: "Hello, whats up?"
        timestamp:
          type: string
          description: ISO timestamp
          format: date-time
          example: "2026-01-01T21:37:00Z"
        attachments:
          type: array
          description: Optional message attachments
          minItems: 0
          maxItems: 10
          items:
            $ref: '#/components/schemas/Attachment'

    ForwardRequest:
      type: object
      description: Forward message request. Must provide either addressingConversationID (for existing conversation) or newContactUsername (to create new private conversation).
      required: [username]
      properties:
        addressingConversationID:
          type: integer
          description: Target conversation ID to forward the message to (optional, use when forwarding to existing conversation)
          minimum: 1
          example: 12345
        newContactUsername:
          type: string
          description: Username to forward message to as a new contact (optional, use when forwarding to new conversation)
          minLength: 1
          maxLength: 64
          pattern: "^[a-zA-Z0-9_-]+$"
          example: "alice"
        username:
          type: string
          description: Username of the user forwarding the message
          minLength: 1
          maxLength: 64
          pattern: "^[a-zA-Z0-9_-]+$"
          example: "Karol"

    Reaction:
      type: object
      description: Emoji reaction
      required: [emoji, username]
      properties:
        emoji:
          type: string
          description: Emoji character
          minLength: 1
          maxLength: 4
          pattern: "^[^ ]+$"
          example: "<:"
        username:
          type: string
          description: Username of the user reacting
          minLength: 1
          maxLength: 64
          pattern: "^[a-zA-Z0-9_-]+$"
          example: "Karol"

    AddGroupMemberRequest:
      type: object
      description: Add group member request payload
      required: [username, user_to_add]
      properties:
        username:
          type: string
          description: Username of the requesting user (must be in group)
          minLength: 1
          maxLength: 64
          pattern: "^[a-zA-Z0-9_-]+$"
          example: "Karol"
        user_to_add:
          type: string
          description: Username of the user to add to the group
          minLength: 1
          maxLength: 64
          pattern: "^[a-zA-Z0-9_-]+$"
          example: "Karol"

    PhotoUpload:
      type: object
      description: Photo upload payload
      required: [photo, username]
      properties:
        photo:
          type: string
          description: Binary image file
          format: binary
        username:
          type: string
          description: Username of the user uploading the photo
          minLength: 1
          maxLength: 64
          pattern: "^[a-zA-Z0-9_-]+$"
          example: "Karol"


    Attachment:
      type: object
      description: Message attachment
      required: [type, content]
      properties:
        type:
          type: string
          description: MIME type of attachment
          minLength: 1
          maxLength: 100
          pattern: "^[a-zA-Z0-9/+-]+$"
          example: "image/jpeg"
        content:
          type: string
          description: Base64 encoded binary content
          format: byte
          pattern: "^[A-Za-z0-9+/]*={0,2}$"
          minLength: 1
          maxLength: 10485760
          example: "iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg=="

    MessageResponse:
      type: object
      description: Response after sending or reacting to a message
      required: [id, senderId, content, conversationId, timestamp]
      properties:
        id:
          type: string
          description: Message ID
          minLength: 1
          maxLength: 64
          pattern: "^[a-zA-Z0-9_-]+$"
          example: "54321"
        senderId:
          type: string
          description: Username of the sender
          minLength: 1
          maxLength: 64
          pattern: "^[a-zA-Z0-9_-]+$"
          example: "Karol"
        content:
          type: string
          description: Message content (or emoji for reactions)
          minLength: 1
          maxLength: 500
          example: "Hello, whats up?"
        conversationId:
          type: string
          description: Conversation ID
          minLength: 1
          maxLength: 64
          pattern: "^[a-zA-Z0-9_-]+$"
          example: "12345"
        timestamp:
          type: string
          format: date-time
          description: Message timestamp
          example: "2026-01-01T21:37:00Z"
    DeleteReaction:
      type: object
      description: Delete reaction payload
      required: [username]
      properties:
        username:
          type: string
          description: Username of the user removing the reaction
          minLength: 1
          maxLength: 64
          pattern: "^[a-zA-Z0-9_-]+$"
          example: "Karol"

    GroupCreate:
      type: object
      description: Create group payload
      required: [group_name, username]
      properties:
        group_name:
          type: string
          description: Name of the group
          minLength: 1
          maxLength: 100
          pattern: "^.*$"
          example: "Development Team"
        username:
          type: string
          description: Creator's username (for authorization)
          minLength: 1
          maxLength: 64
          pattern: "^[a-zA-Z0-9_-]+$"
          example: "Karol"

    GroupCreateResponse:
      type: object
      description: Response after creating a group
      required: [group_id]
      properties:
        group_id:
          type: integer
          format: int64
          description: ID of the created group
          example: 12345

    LeaveGroupRequest:
      type: object
      description: Leave group request payload
      required: [username]
      properties:
        username:
          type: string
          description: Username of the user leaving the group
          minLength: 1
          maxLength: 64
          pattern: "^[a-zA-Z0-9_-]+$"
          example: "Karol"

    MessageStatusUpdate:
      type: object
      description: Message status update payload
      required: [username, status]
      properties:
        username:
          type: string
          description: Username of the user updating the status
          minLength: 1
          maxLength: 64
          pattern: "^[a-zA-Z0-9_-]+$"
          example: "Karol"
        status:
          type: string
          description: New message status (must be one of 'sent', 'delivered', 'received', 'hidden')
          minLength: 4
          maxLength: 9
          pattern: "^(sent|delivered|received|hidden)$"
          enum: [sent, delivered, received, hidden]
          example: "received"